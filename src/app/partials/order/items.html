<button ng-click="orderModel.addItem(true)"
        ng-show="!orderModel.isAddTemplate && !orderModel.isAddItem"
        ng-disabled="orderModel.isReadOnly"
        class="btn btn-default"
        >הוסף פריט</button>
<button ng-click="orderModel.addItem(false)"
        ng-show="orderModel.isAddItem"
        ng-disabled="orderModel.isReadOnly"
        class="btn btn-warning">
    בטל
</button>
<span ng-show="orderModel.isAddItem">
    <select ng-model="orderModel.currentCategory" ng-change="orderModel.setCategory()"
            ng-options="category.label for category in orderModel.categories"></select>
    <label>סינון:</label><input type="text" ng-model="orderModel.filterText"
                                ng-change="orderModel.filterProducts()">
    <table border="1">
      <thead>
      <th>שם מנה</th>
      <th>כבר מופיע?</th>
      </thead>
      <tbody>
      <tr ng-repeat="product in orderModel.filteredCatalog">
        <td ng-click="orderModel.setProduct(product)">{{product.productDescription}}</td>
        <td>{{product.isInOrder | checkMark}}</td>
      </tr>
      </tbody>
    </table>
</span>
<button ng-click="orderModel.addTemplate(true)"
        ng-show="!orderModel.isAddTemplate && !orderModel.isAddItem"
        ng-disabled="orderModel.isReadOnly"
        class="btn btn-default">
    הוסף תבנית
</button>
<span ng-show="orderModel.isAddTemplate">
  <button ng-click="orderModel.addTemplate(false)"
          ng-disabled="orderModel.isReadOnly"
          class="btn btn-warning">
      בטל
  </button>
  &nbsp;
  <span>
    התאמת כמויות
  </span>
  <input type="checkbox" ng-model="orderModel.isAdjustQuantity">
  <table border="1">
    <thead>
    <th>שם תבנית</th>
    <th>משתתפים</th>
    </thead>
      <tbody>
      <tr ng-repeat="template in orderModel.templates">
        <td ng-click="orderModel.setTemplate(template)">
          {{template.attributes.template}}
        </td>
        <td ng-click="orderModel.setTemplate(template)">
          {{template.attributes.noOfParticipants}}
        </td>
      </tr>
      </tbody>
  </table>
</span>
<table style="width: 80%">
  <thead>
  <th style="width: 6%">קטגוריה</th>
  <th style="width: 69%">מוצר</th>
  <th style="width: 5%">יח'</th>
  <th style="width: 5%">כמות</th>
  <th style="width: 5%">קופ'</th>
  <th style="width: 5%">מחיר</th>
  <th style="width: 5%">בונוס</th>
  </thead>
  <tbody>
  <tr ng-repeat="item in orderModel.order.attributes.items track by item.index"
      ng-class="item.isChanged?'myChanged':null">
    <td>{{item.category.label}}</td>
    <td>
      <input type="text" size="90" ng-model="item.productDescription"
             ng-change="orderModel.setProductDescription($index)"
             ng-disabled="orderModel.isReadOnly"
             ng-class="item.errors.productDescription?'myError':null">
    </td>
    <td>{{item.measurementUnit.label}}</td>
    <td>
      <input type="number" size="3" max=1000 min=0
             ng-model="item.quantity"
             ng-change="orderModel.setQuantity($index)"
             ng-disabled="orderModel.isReadOnly"
             ng-class="item.errors.quantity?'myError':null">
    </td>
    <td>{{item.boxCount | number: 2}}</td>
    <td>
      <input type="text" size="7" money min=0 ng-model="item.price"
             ng-change="orderModel.setPrice($index)"
             ng-disabled="orderModel.isReadOnly"
             ng-class="item.errors.price?'myError':null">
    </td>
    <td>
      <input type="checkbox"
             ng-model="item.isFreeItem"
             ng-change="orderModel.setFreeItem($index)"
             ng-disabled="orderModel.isReadOnly"
          >
    </td>
    <td>
      <button ng-click="orderModel.deleteItem($index)"
              ng-disabled="orderModel.isReadOnly"
              class="btn btn-warning btn-sm"
          >מחק</button>
    </td>
  </tr>
  </tbody>
</table>
