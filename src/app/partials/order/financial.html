<div ng-controller="FinancialCtrl as financialModel">
<table>
  <tbody>
  <tr>
    <td><label>ס"ה ביניים</label></td>
    <td></td>
    <td>{{financialModel.order.view.quote.subTotal | currency}}</td>
    <td>
      <button ng-click="financialModel.updatePrices()"
              class="btn btn-default">
              עדכן מחירים
      </button>
    </td>
  </tr>
  <tr ng-show="financialModel.order.view.quote.bonusValue">
    <td><label>פריטי בונוס</label></td>
    <td></td>
    <td>{{financialModel.order.view.quote.bonusValue | currency}}</td>
  </tr>
  <tr ng-show="financialModel.order.view.quote.oldTransportation">
    <td><label>משלוח (ישן)</label></td>
    <td></td>
    <td>{{financialModel.order.view.quote.oldTransportation | currency}}</td>
  </tr>
  <tr ng-show="financialModel.order.view.quote.transportationBonus">
    <td><label>זיכוי משלוח</label></td>
    <td></td>
    <td>{{financialModel.order.view.quote.transportationBonus | currency}}</td>
  </tr>
  <tr ng-class="financialModel.order.view.changes.discountCause?'myChanged':null">
    <td><label>סיבת הנחה</label></td>
    <td>
      <select ng-model="financialModel.order.view.discountCause"
              ng-change="financialModel.setDiscountCause()"
              ng-options="discountCause.label for discountCause in financialModel.discountCauses"
              ng-disabled="financialModel.isReadOnly"
          ></select>
    </td>
    <td></td>
  </tr>
  <tr ng-class="financialModel.order.view.changes.discountRate?'myChanged':null">
    <td><label>% הנחה</label></td>
    <td>
      <input type="number" max=100 min = 0 ng-model="financialModel.order.view.quote.discountRate"
             ng-disabled="!financialModel.order.view.discountCause.tId>0 || financialModel.isReadOnly"
             ng-change="financialModel.setDiscountRate()"
             ng-class="financialModel.order.view.errors.discountRate?'myError':null">
    </td>
    <td>{{financialModel.order.view.quote.discount | currency}}</td>
  </tr>
  <tr>
    <td><label>עיגול</label></td>
    <td></td>
    <td>{{financialModel.order.view.quote.rounding | currency}}</td>
  </tr>
  <tr ng-show="financialModel.order.attributes.isBusinessEvent">
    <td><label>לפני מע"מ</label></td>
    <td></td>
    <td>{{financialModel.order.view.quote.totalBeforeVat | currency}}</td>
  </tr>
  <tr ng-show="financialModel.order.attributes.isBusinessEvent">
    <td>
      <label>
        <span>מע"מ %</span>
        <span>{{financialModel.order.attributes.vatRate*100}}</span>
      </label>
    </td>
    <td></td>
    <td>{{financialModel.order.view.quote.vat | currency}}</td>
  </tr>
  <tr>
    <td><label>לתשלום</label></td>
    <td></td>
    <td>{{financialModel.order.view.quote.total | currency}}</td>
    <td>למשתתף:</td>
    <td>{{financialModel.order.view.quote.total / financialModel.order.attributes.noOfParticipants | currency}}</td>
  </tr>
  <tr ng-class="financialModel.order.view.changes.fixedPrice?'myChanged':null">
    <td><label>מחיר קבוע</label></td>
    <td>
      <input type="checkbox" ng-model="financialModel.order.view.quote.isFixedPrice"
             ng-disabled="financialModel.isReadOnly"
             ng-change="financialModel.setFixedPrice()">
    </td>
    <td>
      <input type="text" money size=5 ng-model="financialModel.order.view.quote.fixedPrice"
             ng-disabled="financialModel.isReadOnly || !financialModel.order.view.quote.isFixedPrice"
             ng-change="financialModel.setFixedPrice()"
             ng-class="financialModel.order.view.errors.fixedPrice?'myError':null">
    </td>
  </tr>
  </tbody>
</table>
</div>
