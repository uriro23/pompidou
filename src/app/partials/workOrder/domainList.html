<table style="width:90%">
  <tr>
    <td style="width:5%" ng-hide="workOrderModel.isPrint[workOrderModel.domain]">
      <span>&nbsp;הצג</span>
      <input type="checkbox"
             ng-model="workOrderModel.hierarchicalWorkOrder[workOrderModel.domain].isShowAll"
             ng-change="workOrderModel.setShowAll(workOrderModel.domain)">
    </td>
    <td style="width:10%;font-size: large" ng-hide="workOrderModel.isPrint[workOrderModel.domain]">
      {{workOrderModel.domains[workOrderModel.domain].forWorkItem}}
      <span ng-show="workOrderModel.isShowTodayOnly[workOrderModel.domain]">להיום</span>
      <span ng-hide="workOrderModel.woIndex.properties.domainStatus[workOrderModel.domain]">
        --- לא מעודכן ---
      </span>
    </td>
    <td style="width:10%;font-size: large" ng-show="workOrderModel.isPrint[workOrderModel.domain]">
      {{workOrderModel.domains[workOrderModel.domain].forWorkItem}}
      <span ng-show="workOrderModel.isShowTodayOnly[workOrderModel.domain]">להיום</span>
    </td>
    <td style="width: 15%" ng-show="workOrderModel.woIndex.properties.domainStatus[workOrderModel.domain]">
      <span>הצג פירוט</span>
      <input type="checkbox" ng-model="workOrderModel.isShowDetails[workOrderModel.domain]"
             ng-change="workOrderModel.setGlobalDetail()">
    </td>
    <td style="width: 15%" ng-show="workOrderModel.woIndex.properties.domainStatus[workOrderModel.domain]">
      <span>כולל מלאי</span>
      <input type="checkbox" ng-model="workOrderModel.isIncludeStock[workOrderModel.domain]">
    </td>
    <td ng-show="workOrderModel.woIndex.properties.domainStatus[workOrderModel.domain]" style="width: 15%">
      <span>כולל הכנות שבוצעו</span>
      <input type="checkbox" ng-model="workOrderModel.isShowDone[workOrderModel.domain]"
             ng-disabled="workOrderModel.isProcessing || workOrderModel.isShowTodayOnly[workOrderModel.domain]">
    </td>
    <td style="width: 15%" ng-show="workOrderModel.woIndex.properties.domainStatus[workOrderModel.domain]">
      <span>הצג רק להיום</span>
      <input type="checkbox" ng-model="workOrderModel.isShowTodayOnly[workOrderModel.domain]">
    </td>
    <td style="width:15%" ng-show="workOrderModel.woIndex.properties.domainStatus[workOrderModel.domain]">
      <span>להדפסה</span>
      <input type="checkbox" ng-model="workOrderModel.isPrint[workOrderModel.domain]">
    </td>
  </tr>
</table>
<div ng-show="!workOrderModel.isPrint[workOrderModel.domain] &&
              workOrderModel.woIndex.properties.domainStatus[workOrderModel.domain]">
<div ng-repeat="cat in workOrderModel.hierarchicalWorkOrder[workOrderModel.domain].categories
                      track by cat.category.tId"
     ng-show="workOrderModel.isShowCategory(cat)">
  <input type="checkbox" ng-model="cat.isShow" style="margin-right: 1%">
  <label>{{cat.category.label}}</label>
  <span ng-hide="cat.category.type===21">
    <span>&nbsp;&nbsp;פירוט</span>
    <input type="checkbox" ng-model="cat.isShowDetails" ng-change="workOrderModel.setCategoryDetail(cat)">
   </span>
  <table ng-show="workOrderModel.domain === 4 && cat.isShow && cat.preServiceList.length > 0"
         class="table table-hover" style="width:90%">
    <thead>
    <th colspan="3">הכנות לסרוויס</th>
    </thead>
    <tbody>
    <tr ng-repeat="woItem in cat.preServiceList track by woItem.id"
        ng-class="woItem.properties.isInStock?'inStock':'null'"
        ng-show="workOrderModel.isShowItem(woItem)">
      <td style="width: 30%">{{woItem.properties.productName}}</td>
      <td style="width: 5%"
          ng-show="!workOrderModel.isShowTodayOnly[workOrderModel.domain] && workOrderModel.isShowDone[workOrderModel.domain]">
        {{woItem.properties.quantity | number:2}}
      </td>
      <td style="width: 5%"
          ng-show="!workOrderModel.isShowTodayOnly[workOrderModel.domain] && !workOrderModel.isShowDone[workOrderModel.domain]">
        {{woItem.properties.quantity - woItem.properties.quantityDone | number:2}}
      </td>
      <td style="width: 5%" ng-show="workOrderModel.isShowTodayOnly[workOrderModel.domain]">
        {{woItem.properties.quantityForToday | number:2}}
      </td>
      <td style="width: 7%">{{woItem.properties.measurementUnit.label}}</td>
      <td style="width: 7%">
        <button ng-click="workOrderModel.backInfo(woItem)"
                ng-disabled= "!workOrderModel.woIndex.properties.domainStatus[workOrderModel.domain]"
                class="btn btn-default btn-sm">
          פרטים
        </button>
      </td>
      <td style="width: 7%">
        <button ng-click="workOrderModel.delItem(workOrderModel.domain,$parent.$index,$index)"
                ng-disabled= "!workOrderModel.woIndex.properties.domainStatus[workOrderModel.domain]"
                class="btn btn-default btn-sm">
          מחק
        </button>
      </td>
      <td style="width: 7%">
        <span>פירוט</span>
        <input type="checkbox" ng-model="woItem.isShowDetails">
      </td>
      <td style="width: 32%" ng-show="woItem.isShowDetails">
        <table class="table">
          <thead>
          <th>לקוח</th>
          <th>יום</th>
          <th>כמות</th>
          <th>מתי</th>
          </thead>
          <tbody>
          <tr ng-repeat="order in woItem.view.orders track by $index"
              ng-hide="(workOrderModel.isShowTodayOnly[workOrderModel.domain] && order.select!=='today') ||
                       (!workOrderModel.isShowDone[workOrderModel.domain] && order.select==='done')">
            <td>{{order.customer}}</td>
            <td>{{order.day}}</td>
            <td>{{order.totalQuantity | number:2}}</td>
            <td>
              {{order.select==="delay"?"עוד לא":
              order.select==="today"?"להיום":
                order.select==="done"?"בוצע":
                  order.select==="unknown"?"לא ידוע":
                    "שגיאה"
              }}
            </td>
          </tr>
          </tbody>
        </table>
      </td>
      <td style="width: 32%" ng-show="!woItem.isShowDetails && !workOrderModel.isShowTodayOnly[workOrderModel.domain]">
        {{woItem.properties.select==="delay"?"עוד לא":
        woItem.properties.select==="today"?"להיום":
          woItem.properties.select==="done"?"בוצע":
            woItem.properties.select==="unknown"?"לא ידוע":
              woItem.properties.select==="mix"?"ראה פירוט":
                "שגיאה"
        }}
      </td>
      <td style="width: 32%" ng-show="!woItem.isShowDetails && workOrderModel.isShowTodayOnly[workOrderModel.domain]">
      </td>
    </tr>
    </tbody>
  </table>
  <table ng-show="workOrderModel.domain === 4 && cat.isShow && cat.serviceList.length > 0"
         class="table table-hover" style="width:90%; border: dashed blue">
    <thead>
    <th colspan="3">סרוויס</th>
    </thead>
    <tbody>
    <tr ng-repeat="woItem in cat.serviceList track by woItem.id"
        ng-class="woItem.properties.isInStock?'inStock':'null'"
        ng-show="workOrderModel.isShowItem(woItem)">
      <td style="width: 30%">{{woItem.properties.productName}}</td>
      <td style="width: 5%"
          ng-show="!workOrderModel.isShowTodayOnly[workOrderModel.domain] && workOrderModel.isShowDone[workOrderModel.domain]">
        {{woItem.properties.quantity | number:2}}
      </td>
      <td style="width: 5%"
          ng-show="!workOrderModel.isShowTodayOnly[workOrderModel.domain] && !workOrderModel.isShowDone[workOrderModel.domain]">
        {{woItem.properties.quantity - woItem.properties.quantityDone | number:2}}
      </td>
      <td style="width: 5%" ng-show="workOrderModel.isShowTodayOnly[workOrderModel.domain]">
        {{woItem.properties.quantityForToday | number:2}}
      </td>
      <td style="width: 7%">{{woItem.properties.measurementUnit.label}}</td>
      <td style="width: 7%">
        <button ng-click="workOrderModel.backInfo(woItem)"
                ng-disabled= "!workOrderModel.woIndex.properties.domainStatus[workOrderModel.domain]"
                class="btn btn-default btn-sm">
          פרטים
        </button>
      </td>
      <td style="width: 7%">
        <button ng-click="workOrderModel.delItem(workOrderModel.domain,$parent.$index,$index)"
                ng-disabled= "!workOrderModel.woIndex.properties.domainStatus[workOrderModel.domain]"
                class="btn btn-default btn-sm">
          מחק
        </button>
      </td>
      <td style="width: 7%" ng-hide="cat.category.type===21">
        <span>פירוט</span>
        <input type="checkbox" ng-model="woItem.isShowDetails">
      </td>
      <td style="width: 32%" ng-show="woItem.isShowDetails || cat.category.type===21">
        <table class="table">
          <thead>
          <th>לקוח</th>
          <th>יום</th>
          <th ng-show="cat.category.type===21"
              ng-repeat="prep in woItem.view.preps track by prep.id">
            {{prep.name}}
          </th>
          <th ng-hide="cat.category.type===21">כמות</th>
          <th class="verticalSeparator" ng-show="cat.category.type===21">{{woItem.properties.measurementUnit.label}}</th>
          <th ng-hide="workOrderModel.isShowTodayOnly[workOrderModel.domain]">מתי</th>
          </thead>
          <tbody>
          <tr ng-repeat="order in woItem.view.orders track by $index"
              ng-hide="(workOrderModel.isShowTodayOnly[workOrderModel.domain] && order.select!=='today') ||
                       (!workOrderModel.isShowDone[workOrderModel.domain] && order.select==='done')">
            <td>{{order.customer}}</td>
            <td>{{order.day}}</td>
            <td ng-show="cat.category.type===21"
                ng-repeat="prep in order.preps track by prep.seq">
              {{prep.quantity}}
            </td>
            <td ng-class="cat.category.type===21 ? 'verticalSeparator' : null">
              {{order.totalQuantity | number:2}}
            </td>
            <td ng-hide="workOrderModel.isShowTodayOnly[workOrderModel.domain]">
              {{order.select==="delay"?"עוד לא":
              order.select==="today"?"להיום":
                order.select==="done"?"בוצע":
                  order.select==="unknown"?"לא ידוע":
                    "שגיאה"
              }}
            </td>
          </tr>
          <tr ng-show="cat.category.type===21">
            <td>סה"כ</td>
            <td></td>
            <td ng-repeat="prep in woItem.view.preps track by prep.id">
              <span ng-show="workOrderModel.isShowTodayOnly[workOrderModel.domain]">
                {{prep.quantityForToday}}
              </span>
              <span ng-show="!workOrderModel.isShowTodayOnly[workOrderModel.domain] &&
                             !workOrderModel.isShowDone[workOrderModel.domain]">
                {{prep.quantity - prep.quantityDone}}
              </span>
              <span ng-show="!workOrderModel.isShowTodayOnly[workOrderModel.domain] &&
                             workOrderModel.isShowDone[workOrderModel.domain]">
                {{prep.quantity}}
              </span>
            </td>
            <td class="verticalSeparator">
            <span ng-show="!workOrderModel.isShowTodayOnly[workOrderModel.domain] &&
                            workOrderModel.isShowDone[workOrderModel.domain]">
              {{woItem.properties.quantity | number:2}}
            </span>
            <span ng-show="!workOrderModel.isShowTodayOnly[workOrderModel.domain] &&
                           !workOrderModel.isShowDone[workOrderModel.domain]">
              {{woItem.properties.quantity - woItem.properties.quantityDone | number:2}}
            </span>
            <span ng-show="workOrderModel.isShowTodayOnly[workOrderModel.domain]">
              {{woItem.properties.quantityForToday | number:2}}
            </span>
            </td>
          </tr>
          </tbody>
        </table>
      </td>
      <td style="width: 32%"
          ng-show="!woItem.isShowDetails &&
                   !workOrderModel.isShowTodayOnly[workOrderModel.domain] &&
                   !cat.category.type===21">
        {{woItem.properties.select==="delay"?"עוד לא":
        woItem.properties.select==="today"?"להיום":
          woItem.properties.select==="done"?"בוצע":
            woItem.properties.select==="unknown"?"לא ידוע":
              woItem.properties.select==="mix"?"ראה פירוט":
                "שגיאה"
        }}
      </td>
      <td style="width: 32%" ng-show="!woItem.isShowDetails && workOrderModel.isShowTodayOnly[workOrderModel.domain]">
      </td>
    </tr>
    </tbody>
  </table>
  <table ng-show="cat.isShow" class="table table-hover" style="width:90%">
    <tbody>
    <tr ng-repeat="woItem in cat.list track by woItem.id"
        ng-class="woItem.properties.isInStock?'inStock':'null'"
        ng-show="workOrderModel.isShowItem(woItem)">
      <td style="width: 30%">{{woItem.properties.productName}}</td>
      <td style="width: 5%"
          ng-show="!workOrderModel.isShowTodayOnly[workOrderModel.domain] && workOrderModel.isShowDone[workOrderModel.domain]">
        {{woItem.properties.quantity | number:2}}
      </td>
      <td style="width: 5%"
          ng-show="!workOrderModel.isShowTodayOnly[workOrderModel.domain] && !workOrderModel.isShowDone[workOrderModel.domain]">
        {{woItem.properties.quantity - woItem.properties.quantityDone | number:2}}
      </td>
      <td style="width: 5%" ng-show="workOrderModel.isShowTodayOnly[workOrderModel.domain]">
        {{woItem.properties.quantityForToday | number:2}}
      </td>
      <td style="width: 7%">{{woItem.properties.measurementUnit.label}}</td>
      <td style="width: 7%">
        <button ng-click="workOrderModel.backInfo(woItem)"
                ng-disabled= "!workOrderModel.woIndex.properties.domainStatus[workOrderModel.domain]"
                class="btn btn-default btn-sm">
          פרטים
        </button>
      </td>
      <td style="width: 7%">
        <button ng-click="workOrderModel.delItem(workOrderModel.domain,$parent.$index,$index)"
                ng-disabled= "!workOrderModel.woIndex.properties.domainStatus[workOrderModel.domain]"
                class="btn btn-default btn-sm">
          מחק
        </button>
      </td>
      <td style="width: 7%">
        <span>פירוט</span>
        <input type="checkbox" ng-model="woItem.isShowDetails">
      </td>
      <td style="width: 32%" ng-show="woItem.isShowDetails">
        <table class="table">
          <thead>
          <th>לקוח</th>
          <th>יום</th>
          <th>כמות</th>
          <th>מתי</th>
          </thead>
          <tbody>
          <tr ng-repeat="order in woItem.view.orders track by $index"
              ng-hide="(workOrderModel.isShowTodayOnly[workOrderModel.domain] && order.select!=='today') ||
                       (!workOrderModel.isShowDone[workOrderModel.domain] && order.select==='done')">
            <td>{{order.customer}}</td>
            <td>{{order.day}}</td>
            <td>{{order.totalQuantity | number:2}}</td>
            <td>
              {{order.select==="delay"?"עוד לא":
              order.select==="today"?"להיום":
                order.select==="done"?"בוצע":
                  order.select==="unknown"?"לא ידוע":
                    "שגיאה"
              }}
            </td>
          </tr>
          </tbody>
        </table>
      </td>
      <td style="width: 32%" ng-show="!woItem.isShowDetails && !workOrderModel.isShowTodayOnly[workOrderModel.domain]">
        {{woItem.properties.select==="delay"?"עוד לא":
        woItem.properties.select==="today"?"להיום":
          woItem.properties.select==="done"?"בוצע":
            woItem.properties.select==="unknown"?"לא ידוע":
              woItem.properties.select==="mix"?"ראה פירוט":
                "שגיאה"
        }}
      </td>
      <td style="width: 32%" ng-show="!woItem.isShowDetails && workOrderModel.isShowTodayOnly[workOrderModel.domain]">
      </td>
    </tr>
    </tbody>
  </table>
</div>
</div>
<div style="margin-right: 2%;margin-bottom: 2cm;margin-top: 1cm"
 ng-show="workOrderModel.isPrint[workOrderModel.domain] &&
          workOrderModel.woIndex.properties.domainStatus[workOrderModel.domain]">
  <div ng-repeat="cat in workOrderModel.hierarchicalWorkOrder[workOrderModel.domain].categories
                  track by cat.category.tId"
       ng-show="workOrderModel.isShowCategory(cat)">
    <label ng-show="cat.isShow" style="font-size: x-large">{{cat.category.label}}</label>
    <div ng-show="workOrderModel.domain === 4 && cat.isShow && cat.preServiceList.length > 0"
         style="column-count: 2; width:90%">
      <div ng-repeat="woItem in cat.preServiceList track by woItem.id" style="font-size: large"
           ng-show="workOrderModel.isShowItem(woItem)">
        <span style="position: relative;right:0%"
              ng-show="!workOrderModel.isShowTodayOnly[workOrderModel.domain] &&
                        workOrderModel.isShowDone[workOrderModel.domain]">
          {{woItem.properties.quantity | number:2}}</span>
        <span style="position: relative;right:0%"
              ng-show="!workOrderModel.isShowTodayOnly[workOrderModel.domain] &&
                        !workOrderModel.isShowDone[workOrderModel.domain]">
        {{woItem.properties.quantity - woItem.properties.quantityDone | number:2}}</span>
        <span style="position: relative;right:0%" ng-show="workOrderModel.isShowTodayOnly[workOrderModel.domain]">
          {{woItem.properties.quantityForToday | number:2}}</span>
        <span style="position: relative;right:4%">{{woItem.properties.measurementUnit.label}}</span>
        <span style="position: relative;right:15%">{{woItem.properties.productName}}</span>
      </div>
    </div>
    <div ng-show="workOrderModel.domain === 4 && cat.isShow && cat.serviceList.length > 0"
         style="column-count: 2; width:90%">
      <div ng-repeat="woItem in cat.serviceList track by woItem.id" style="font-size: large"
           ng-show="workOrderModel.isShowItem(woItem)">
        <span style="position: relative;right:0%"
              ng-show="!workOrderModel.isShowTodayOnly[workOrderModel.domain] &&
                        workOrderModel.isShowDone[workOrderModel.domain]">
          {{woItem.properties.quantity | number:2}}</span>
        <span style="position: relative;right:0%"
              ng-show="!workOrderModel.isShowTodayOnly[workOrderModel.domain] &&
                        !workOrderModel.isShowDone[workOrderModel.domain]">
        {{woItem.properties.quantity - woItem.properties.quantityDone | number:2}}</span>
        <span style="position: relative;right:0%" ng-show="workOrderModel.isShowTodayOnly[workOrderModel.domain]">
          {{woItem.properties.quantityForToday | number:2}}</span>
        <span style="position: relative;right:4%">{{woItem.properties.measurementUnit.label}}</span>
        <span style="position: relative;right:15%">{{woItem.properties.productName}}</span>
      </div>
    </div>
    <div ng-show="cat.isShow" style="column-count: 2; width:90%">
      <div ng-repeat="woItem in cat.list track by woItem.id" style="font-size: large"
           ng-show="workOrderModel.isShowItem(woItem)">
        <span style="position: relative;right:0%"
              ng-show="!workOrderModel.isShowTodayOnly[workOrderModel.domain] &&
                        workOrderModel.isShowDone[workOrderModel.domain]">
          {{woItem.properties.quantity | number:2}}</span>
        <span style="position: relative;right:0%"
              ng-show="!workOrderModel.isShowTodayOnly[workOrderModel.domain] &&
                        !workOrderModel.isShowDone[workOrderModel.domain]">
        {{woItem.properties.quantity - woItem.properties.quantityDone | number:2}}</span>
        <span style="position: relative;right:0%" ng-show="workOrderModel.isShowTodayOnly[workOrderModel.domain]">
          {{woItem.properties.quantityForToday | number:2}}</span>
        <span style="position: relative;right:4%">{{woItem.properties.measurementUnit.label}}</span>
        <span style="position: relative;right:15%">{{woItem.properties.productName}}</span>
      </div>
    </div>
    <p></p>
  </div>
</div>
