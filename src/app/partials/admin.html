<h2>ניהול</h2>
<div>
  <!--
  <button class="btn btn-default" ng-click="adminModel.createNewQuoteData()">הסב להצעות מחיר חדשות</button>
  <button class="btn btn-default" ng-click="adminModel.dropOldQuoteData()">מחק נתוני הצעות מחיר ישנות</button>
  <button class="btn btn-default" ng-click="adminModel.createOrderHeaders()">צור כותרת אירוע</button>
  <button class="btn btn-default" ng-click="adminModel.prepareMultipleQuotes()">הכן ריבוי ציטוטים</button>
  -->
</div>
<tabset>
  <tab heading='מע"מ'>
    <label>שיעור מע"מ: </label>
    <input type="number" min="0" max="50" ng-change="adminModel.setVat()"
           ng-model-options="{updateOn: 'blur'}"
           ng-model="adminModel.vatRate"
           ng-class="adminModel.vatError?'bg-danger':null">
    <button class="btn btn-default" ng-click="adminModel.updateVat()">עדכן</button>
  </tab>
  <tab heading="שינוי סיסמה">
    <table>
      <tbody>
      <tr>
        <td><label>סיסמה חדשה: </label></td>
        <td><input type="password" size="8" ng-model="adminModel.pwd1"></td>
      </tr>
      <tr>
        <td><label>חזור על הסיסמה: </label></td>
        <td><input type="password" size="8" ng-model="adminModel.pwd2"></td>
      </tr>
      </tbody>
    </table>
    <button class="btn btn-default" ng-click="adminModel.setPwd()">עדכן</button>
  </tab>
  <tab heading="משתמשים">
    <table class="table table-hover">
      <thead>
      <th style="text-align: left">username</th>
      <th style="text-align: left">email</th>
      </thead>
      <tbody>
      <tr ng-repeat="user in adminModel.users">
        <td style="text-align: left">{{user.attributes.username}}</td>
        <td style="text-align: left">{{user.attributes.email}}</td>
        <td>
          <button class="btn btn-warning"
                  ng-hide="user.isInRole || adminModel.isUserRefresh"
                  ng-click="adminModel.addUserToRole(user)">
            add to role
          </button>
        </td>
        <td>
          <button class="btn btn-default btn-sm" ng-click="adminModel.resetPwd(user)">
            אפס סיסמה
          </button>
        </td>
      </tr>
      </tbody>
    </table>
    <div>
      <button class="btn btn-default" ng-click="adminModel.newUser()">משתמש חדש</button>
      <input type="text"
             ng-show="adminModel.isNewUser"
             ng-model="adminModel.user.attributes.username"
             placeholder="username">
      <input type="text"
             ng-show="adminModel.isNewUser"
             ng-model="adminModel.user.attributes.password"
             placeholder="password">
      <input type="text"
             ng-show="adminModel.isNewUser"
             ng-model="adminModel.user.attributes.email"
             placeholder="email">
      <button ng-show="adminModel.isNewUser"
              class="btn btn-primary btn-sm"
              ng-click="adminModel.createUser()">צור</button>
      <button ng-show="adminModel.isNewUser"
              class="btn btn-warning btn-sm"
              ng-click="adminModel.cancelNewUser()">בטל</button>
    </div>
    <!-- only first time
    <div>
      <button class="btn btn-default" ng-click="adminModel.createRole()">Role</button>
    </div>
    -->
  </tab>
 <tab heading="קטלוג" select="adminModel.catalogReport()">
   <h3>רשימת מנות שהיו באירועים בשנה האחרונה ושאין להם פירוק להכנות ומצרכים</h3>
    <table class="table table-hover" style="width: 70%">
      <th>קטגוריה</th>
      <th>תיאור</th>
      <th>אירועים</th>
      <tr ng-repeat="catItem in adminModel.catalog">
        <td>{{catItem.view.category.label}}</td>
        <td style="cursor: pointer" ng-click="adminModel.selectCatItem(catItem.id)">{{catItem.attributes.productDescription}}</td>
        <td>{{catItem.view.count}}</td>
      </tr>
    </table>
  </tab>
  <tab heading="סביבה" active="adminModel.isEnvTabActive">
    <div>
      <span>סביבה נוכחית היא </span>
      <span>{{environment}}</span>
    </div>
    <div>
      <button class="btn btn-default" ng-click="adminModel.switchEnv()">שנה</button>
    </div>
  </tab>
</tabset>
